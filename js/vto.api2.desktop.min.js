!function(){"use strict";var e={currentVideo:"",currentUserId:"",userGender:"",userSize:"",noVTOModel:!0,glassesUpc:$(".product-upc").find(".upc").text()},o={settings:e,vtoElements:function(){var e=this;$('<a class="icon pdp-vto sgh-vto-overlay-open vto-hide" ><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 15 19"><defs><path id="a" d="M1.1 9.1c0-.1 0-.1 0 0 .4.8.7 1.7.9 1.9V9.8h.4v.1l.2.8c.1.3.2.6.4.8.2.2.6.3.9.3h1.3c.2 0 .5-.1.7-.2.3-.1.5-.3.6-.6.1-.1.1-.3.1-.4.1-.4.2-.7.2-.9h1c0 .2.1.5.2.9 0 .1.1.3.1.4.1.3.3.5.6.6.2.1.5.2.7.2h1.3c.3 0 .6-.1.9-.3.2-.2.4-.5.5-.7l.2-.8v-.1h.3l.1.8c.3-.5.5-1.1.7-1.7.1 0 .1.1.2.1.3.1.4.3.4.5v.2c0 .6-.1 1.1-.4 1.6-.1.2-.2.4-.4.6-.1.1-.2.2-.4.3l-.2.1-.1.2c-.3 1.4-.9 2.6-1.9 3.7-.9.9-2 1.4-3.3 1.4s-2.3-.4-3.2-1.3c-.9-1.1-1.6-2.3-1.9-3.7l-.1-.2-.1-.1c-.2-.1-.3-.2-.4-.3-.2-.3-.4-.7-.5-1-.1-.4-.2-.8-.2-1.2v-.2c0-.3 0-.5.2-.6zm2.7-4.2s.9-1.6 2.3-.5 3 3.1 6.4 3.1l.2 1.7h-.3s0-.5-.9-.6H8.8c-.4 0-.7.2-.8.5H6.8c-.1-.3-.4-.5-.7-.5H3.3c-.9.1-.9.6-.9.6h-.3c.1-1.8.5-4.3 1.7-4.3zM.9 12.7c.2.2.3.3.6.4.3 1.4 1 2.8 2 3.9s2.4 1.7 3.9 1.7 2.9-.6 3.9-1.7 1.7-2.4 2-3.9c.2-.1.4-.3.6-.4.3-.4.6-.8.7-1.3.2-.5.2-1 .2-1.5v-.3c0-.4-.2-.8-.4-1.1-.2-.2-.3-.3-.6-.4 0-.2.1-.4.1-.6.4-2.1-.1-5.9-4.4-7.2C7.2-.5 4.7.2 3.1 2c0 0-3 .9-2.2 6.2-.2 0-.3.1-.4.3-.3.3-.5.7-.5 1v.3c0 .7.2 1.3.4 2 .2.3.3.6.5.9z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-126-581h375v1740h-375z"/></defs><clipPath id="d"><use xlink:href="#c" overflow="visible"/></clipPath><path clip-path="url(#d)" d="M-5-5h24.8v28.7H-5z"/></g></svg> <span></span</a>').appendTo("#pdp-display .viewBy"),$($("<div/>").attr("id","sgh-vto-overlay_model").addClass("vto-hide").append('<span id="user-id">c4a6953b-986c-4549-a927-a7c5d4ea1054</span>').append($("<div/>").attr("id","sgh-vto-vtomodel-container").append('<div id="vto_modal_app_root" ></div>').prepend($("<div/>").attr("id","sgh-vto-overlay-video-buttons").append('<a id="vto-open-edit" class="vto-hide" >Options</a> '))).append('<div class="vto-hide" id="render-success"><span id="video-id">video-id</span> <span id="render-success-time">&quot;video-id</span> <span id="render-success-time"><!--render--></span> <span id="video-id">video-id</span></div>')).appendTo("#pdp-display >#product"),$($("<div/>").attr("id","sgh-vto-video-edit-container").addClass("vto-hide vto-video-edit-modal-initial").append($("<div/>").attr("id","sgh-vto-video-edit").addClass("sgh-vto-video-edit-modal").append('<i class="modal-close vto-option-cancel">&#10006;</i>').append($("<div/>").addClass("vto-edit-page vto-edit-initial").append("<p>VIRTUAL MODEL OPTIONS</p>").append('<a class="vto-retake-button button black-button bordered" >RETAKE MY VIDEO</a>').append('<a class="vto-delete-button button black-button bordered">REMOVE MY VIRTUAL MODEL</a>')).append($("<div/>").addClass("vto-edit-page vto-edit-retake").append("<p>RETAKING YOUR VIDEO WILL REMOVE YOUR CURRENT ONE </p>").append('<a class="vto-retake-cancel button black-button" >CANCEL</a>').append('<a class="vto-retake-confirm button black-button bordered">RETAKE</a>')).append($("<div/>").addClass("vto-edit-page vto-edit-delete").append("<p>ARE YOU SURE YOU WANT TO REMOVE YOUR VIRTUAL MODEL? </p>").append('<a class="vto-delete-cancel button button black-button" >CANCEL</a>').append('<a class="vto-delete-confirm button black-button bordered">REMOVE</a>'))).append('<div class="sgh-vto-video-edit-background vto-option-cancel"></div>')).appendTo("#page"),$($("<div/>").attr("id","sgh_vto_overlay").addClass("vto-hide").append($("<div/>").attr("id","sgh-vto-overlay_video").append('<span id="user-id">c4a6953b-986c-4549-a927-a7c5d4ea1054</span>').append('<i class="modal-close sgh-vto-overlay-close">&#10006; Close</i>').append('<h3 class="vto-create-header">CREATE YOUR VIRTUAL MODEL</h3>').append($("<div/>").attr("id","sgh-vto-video-container").append('<div id="vto_app_root" class="vto-hide">vto_app_root</div>'))).append('<div class="vto-overlay-background"></div>')).appendTo("#pdp"),$(".sgh-vto-overlay-close").on("click",function(){e.vtoClose()}),$(".sgh-vto-model-close").on("click",function(){e.closeVTOModelWindow()})},analyticsTrack:function(e){var o=this,t=o.settings.currentVideo,a=o.settings.noVTOModel,i=o.settings.userGender,n=o.settings.userSize,s="new";t&&a!==!0&&(s="returning"),""!==i&&"undefined"!==i?i+=": ":i="",""!==n&&"undefined"!==n?n+=": ":n="";var d=[{upc:o.settings.glassesUpc}],r={link_name:"sgh: vto: "+s+": "+i+n+e,site_events:{see_their_shades:!0},prd_upc:[o.settings.glassesUpc],products:d,authenticated_status:utag_data.authenticated_status||"",language:utag_data.language||"",cntry:utag_data.country||""};_trackAnalytics(r)},vtoClose:function(){var e=this;$("#page-wrapper").removeClass("vto-disable-scrolling").bind("touchmove"),$("#sgh_vto_overlay").removeClass("active").hide(),$("body").removeClass("vto-disable-scrolling"),e.analyticsTrack("closed vto")},closeVTOModelWindow:function(){var e=this;$("#pdp-container").removeClass("show-vto"),$("#sgh-vto-overlay_model").addClass("vto-hide").removeClass("active"),e.analyticsTrack("closed vto model")},genericErrorHandler:function(e){$("#vto_app_root").hide(),$("#sgh-vto-overlay_video").hide(),$("#vto_start_button").addClass("hide");var o={link_name:"sgh: vto: generic error: "+e,site_events:{see_their_shades:!0},authenticated_status:utag_data.authenticated_status||"",language:utag_data.language||"",cntry:utag_data.country||""};_trackAnalytics(o)},getVtoSize:function(e){var o=$(window).width()/e,t=$(window).height()/e;return o>t&&(o=t),{width:o,height:o}},vtoApplication:function(e){function o(){$(".fullscreenable .info-container").length<1&&$(".fullscreenable div.renderer:not(.preview-page)").after('<div class="info-container vto-hide"></div>');var e=$("#update_cart_total .info-container").find(".brand").text(),o=$("#update_cart_total .info-container").find(".price").text(),t=$("#update_cart_total .info-container").find(".style").first().text(),a=$(".styleInfo ").find("li:eq(5)").html(),i=$(".swatchesTitle").find("h3").html(),n=$("#update_cart_total .info-container > .catalog-polarized").length,s=n?'<p class="catalog-polarized">Polarized</p>':"";$("#sgh_vto_overlay .info-container").html('<p class="brand">'+e+"</p>"+s+'<p class="price">'+o+'</p><p class="style">'+t+'</p><p class="swatch">'+i+'</p><p class="fit">'+a+"</p>")}function t(){$.cookie("vtoId")&&$.cookie("vtoId","deleted",{expires:1,path:"/",domain:"sunglasshut.com"}),u="",l.settings.currentVideo="",l.analyticsTrack("option modal: delete modal: confirmed");var e="https://"+window.location.host+window.location.pathname;location.href=e,l.closeVTOModelWindow(),$("#sgh-vto-video-container").addClass("active"),$("#sgh-vto-vtomodel-container").removeClass("active"),$("a.sgh-vto-overlay-open").find("span").text("TRY THEM ON"),$("#sgh-vto-overlay_container").show(),$("#vto-open-edit").hide(),$("#sgh-vto-video-edit-container").hide().addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake"),$("#vto_modal_app_root").html(""),g=!1,u="",l.settings.currentVideo="",m=!0}function a(){var e=jQuery.parseJSON('{ "userId": "'+h+'", "videoId": "'+u+'", "gen": "'+l.settings.userGender+'", "fit": "'+l.settings.userSize+'" }');$.cookie("vtoId",JSON.stringify(e),{expires:300,path:"/",domain:"sunglasshut.com"}),l.settings.currentVideo=u,l.settings.currentUserId=h;$.cookie("vtoId");$("#sgh-vto-overlay-video-buttons.vto-hide").removeClass("vto-hide"),$("#sgh-vto-video-container").removeClass("active"),$("#vto-open-edit").delay(300).fadeIn(300),1!=w&&(o(),$("#vto-open-edit").on("click",function(){$("#sgh-vto-video-edit-container").fadeIn(300),l.analyticsTrack("option modal:")}),$(".p3dzoom-icon-link, .viewBy .fit, .viewBy .pdp-zoom").on("click",function(){$("#pdp-container.show-vto").length>0&&l.closeVTOModelWindow()}),$(".vto-option-cancel").on("click",function(){$("#sgh-vto-video-edit-container").fadeOut(300),$("#sgh-vto-video-edit-container").addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake"),l.analyticsTrack("option modal: cancel")}),$(".vto-retake-button").on("click",function(){$("#sgh-vto-video-edit-container").addClass("vto-video-edit-modal-retake").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-initial"),l.analyticsTrack("option modal: retake modal:")}),$(".vto-retake-cancel").on("click",function(){$("#sgh-vto-video-edit-container").addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake"),l.analyticsTrack("option modal: retake modal: cancel")}),$(".vto-retake-confirm").on("click",function(){var e;l.analyticsTrack("option modal: retake modal: confirmed"),g=!0,e="https://"+window.location.host+window.location.pathname,h&&(e+="?vtoId="+h,e+="&retake=true"),location.href=e}),$(".vto-delete-cancel").on("click",function(){$("#sgh-vto-video-edit-container").addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake"),l.analyticsTrack("option modal: delete modal: cancel")}),$(".vto-delete-confirm").on("click",function(){t()}),$(".vto-delete-button").on("click",function(){$("#sgh-vto-video-edit-container").removeClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-retake").addClass("vto-video-edit-modal-delete"),l.analyticsTrack("option modal: delete modal:")}),$("a.sgh-vto-overlay-open").find("span").text("VIRTUAL MODEL"),w=!0),$("#sgh_vto_overlay .info-container").delay(200).fadeIn(300),$("#sgh-vto-overlay_container").hide(),l.analyticsTrack("vto pdp:"),g=!1,m=!1}function i(e){f!==e&&u||g===!0?($("#pdp-container").addClass("show-vto"),$("#sgh-vto-vtomodel-container").addClass("active").removeClass("vto-hide"),$("#video-id").text(u),VtoApp.renderGlasses("vto_modal_app_root",u,v,{width:480,height:480},a,l.genericErrorHandler,{showRotateBar:!0}),f=e,g=!1):($("#sgh-vto-vtomodel-container").addClass("active").removeClass("vto-hide"),$("#pdp-container").addClass("show-vto"),$("#vto-open-edit").fadeIn(200),l.analyticsTrack("vto pdp: reopened")),$("#sgh-vto-video-container").removeClass("active")}function n(e,o){u=e,l.settings.userGender=o.gender,l.settings.userSize=o.fit,$("#pdp-container").addClass("show-vto"),$("#sgh_vto_overlay").removeClass("active").addClass("vto-hide").hide(),$("#sgh-vto-overlay_model").addClass("active").removeClass("vto-hide"),VtoApp.renderGlasses("vto_modal_app_root",u,v,{width:480,height:480},a,l.genericErrorHandler,{showRotateBar:!0})}function s(){$("#sgh_vto_overlay").addClass("active").removeClass("vto-hide").show(),$(".vto-try-them-on").hide(),VtoApp.startCapture("vto_app_root",h,v,{width:480,height:480},{onCloseVto:l.vtoClose,showWelcomePage:!1,showScalingQuestions:!0,showReviewWithGlasses:!1,showSaveToAccount:!1},n,n,l.genericErrorHandler),$(p).removeClass("vto-hide").show(),$("#sgh-vto-overlay_video").show(),$("#sgh-vto-overlay_container").hide()}function d(e){var o,t,a=decodeURIComponent(window.location.search.substring(1)),i=a.split("&");for(t=0;t<i.length;t++)if(o=i[t].split("="),o[0]===e)return void 0===o[1]||o[1]}function r(){$(".pdpZoom.lazy-container").css("opacity",""),$("#product").removeClass("showingRotator"),$(".p3dzoom-icon-link").removeClass("redesignPdp-rotate-active active").addClass("redesignPdp-rotate-inactive"),$("#pdpImage img").remove(),$(".iviewer_toggle").children().remove(),$("#zoomViewer").hide().removeClass("open"),$(".close","#right-nav").show(),$(".fit",".viewBy").removeClass("redesignPdp-fit-active active").addClass("redesignPdp-fit-inactive"),$("#fit-overlay").hide(),$("#p3dzoom-image").unreel(),$(".p3dzoom-rotate-btn").unbind()}function c(e){var o=$("a.sgh-vto-overlay-open");VtoApp.init(h,v,"sunglasshut","en-US","master",k,function(e,t){$("#user-id").text("#user-id "+e),h=e,t.webcamCapture!==!1&&t.rendering!==!1?(u?(o.find("span").text("VIRTUAL MODEL"),o.removeClass("vto-hide").addClass("vto-show")):(o.find("span").text("TRY THEM ON"),o.removeClass("vto-hide").addClass("vto-show")),!u&&d("vtoId")||"true"===d("retake")?(s(d("vtoId")),o.on("click",function(){r(),u&&$(".show-vto").length<1?($("#sgh-vto-overlay_model").addClass("active").removeClass("vto-hide"),i(v),l.settings.currentVideo=u,m=!0):$(".show-vto").length>0?l.closeVTOModelWindow():$("#sgh_vto_overlay").addClass("active").removeClass("vto-hide").show()})):o.on("click",function(){r();var e;u?$(".show-vto").length>0?l.closeVTOModelWindow():($("#sgh-vto-overlay_model").addClass("active").removeClass("vto-hide"),i(v),l.settings.currentVideo=u,m=!0):"https:"!==location.protocol?(e="https://"+window.location.host+window.location.pathname,h&&(e+="?vtoId="+h),location.href=e):s(h)})):l.analyticsTrack("no webcam support")},l.genericErrorHandler)}var l=this,v=l.settings.glassesUpc,p="#vto_app_root",h=l.settings.currentUserId,u=l.settings.currentVideo,g=!1,m=l.settings.noVTOModel,f="",w=(utag.data.page_type,!1),k={demo:{onPageLoad:function(){l.analyticsTrack("step 1: instructions")},onFaceSwipe:function(){},onCreateModel:function(){}},capture:{onPageLoad:function(){l.analyticsTrack("step 2: capture")},onValidHeadtrack:function(){l.analyticsTrack("step 2: capture: valid head track")},onWebcamAllowed:function(){}},browsererror:{onPageLoad:function(){l.analyticsTrack("error: browser ")}},deviceerror:{onPageLoad:function(){l.analyticsTrack("error: device")}},permissionerror:{onPageLoad:function(){l.analyticsTrack("error: permission")}},processingerror:{onPageLoad:function(){l.analyticsTrack("error: processing")},onRetry:function(){}},uploaderror:{onPageLoad:function(){l.analyticsTrack("error: upload")},onRetry:function(){}},upload:{onPageLoad:function(){l.analyticsTrack("step 3: select size and gender:")}},processing:{onPageLoad:function(){l.analyticsTrack("step 4: uploaded video: processing")}},preview:{onPageLoad:function(){l.analyticsTrack("step 4: preview")},onFaceSwipe:function(){l.analyticsTrack("step 4: preview: face swipe")},onRetake:function(){l.analyticsTrack("step 4: preview: retake")},onSave:function(){l.analyticsTrack("step 4: preview: save")},onContinue:function(){l.analyticsTrack("step 4: preview: on continue")}},render:{onPageLoad:function(){},onFaceSwipe:function(){l.analyticsTrack("vto pdp: face swipe")},onRenderGlasses:function(){}},comingsoon:{onPageLoad:function(){l.analyticsTrack("coming soon")}},rendererror:{onPageLoad:function(){l.analyticsTrack("error: render")}}};c(e)},vtoAPI:function(){var e=this,o="https://d1phjbsp802ne8.cloudfront.net/vto-desktop-application.js?v=01";$(".ajax-loader-wrap, #ajax-container").hide(),window.jQuery.ajax(o,{type:"get",dataType:"script",cache:!0,async:!0,crossDomain:!0,success:function(o){function t(t){if($.cookie("vtoId")&&"deleted"!==$.cookie("vtoId")){var a=JSON.parse($.cookie("vtoId"));e.settings.currentUserId=a.userId,e.settings.currentVideo=a.videoId,e.settings.userGender=a.gen,e.settings.userSize=a.fit,e.settings.currentVideo&&(e.settings.noVTOModel=!1)}t===!0?(e.vtoElements(),e.vtoApplication(o),e.analyticsTrack("supported upc:")):e.analyticsTrack("not supported upc:")}VtoApp.isUpcSupported(e.settings.glassesUpc,t,e.genericErrorHandler)},complete:function(){$(".ajax-loader-wrap, #ajax-container").show()},error:function(){e.analyticsTrack("error: loading script: "),console.log("error")}})},init:function(){return this.vtoAPI(),this}};window.sghVTO=o}(),$(function(){sghVTO.init()});