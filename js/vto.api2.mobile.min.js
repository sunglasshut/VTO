!function(){"use strict";var e={currentVideo:"",currentUserId:"",modelVideoId:"alessandra",upcGender:"female",userGender:"",userSize:"",noVTOModel:!0,clickedModel:!1,glassesUpc:$("#upc").text()},o={settings:e,vtoElements:function(){var e=this;$('<a class="button black sgh-vto-overlay-open vto-hide" ><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 15 19"><defs><path id="a" d="M1.1 9.1c0-.1 0-.1 0 0 .4.8.7 1.7.9 1.9V9.8h.4v.1l.2.8c.1.3.2.6.4.8.2.2.6.3.9.3h1.3c.2 0 .5-.1.7-.2.3-.1.5-.3.6-.6.1-.1.1-.3.1-.4.1-.4.2-.7.2-.9h1c0 .2.1.5.2.9 0 .1.1.3.1.4.1.3.3.5.6.6.2.1.5.2.7.2h1.3c.3 0 .6-.1.9-.3.2-.2.4-.5.5-.7l.2-.8v-.1h.3l.1.8c.3-.5.5-1.1.7-1.7.1 0 .1.1.2.1.3.1.4.3.4.5v.2c0 .6-.1 1.1-.4 1.6-.1.2-.2.4-.4.6-.1.1-.2.2-.4.3l-.2.1-.1.2c-.3 1.4-.9 2.6-1.9 3.7-.9.9-2 1.4-3.3 1.4s-2.3-.4-3.2-1.3c-.9-1.1-1.6-2.3-1.9-3.7l-.1-.2-.1-.1c-.2-.1-.3-.2-.4-.3-.2-.3-.4-.7-.5-1-.1-.4-.2-.8-.2-1.2v-.2c0-.3 0-.5.2-.6zm2.7-4.2s.9-1.6 2.3-.5 3 3.1 6.4 3.1l.2 1.7h-.3s0-.5-.9-.6H8.8c-.4 0-.7.2-.8.5H6.8c-.1-.3-.4-.5-.7-.5H3.3c-.9.1-.9.6-.9.6h-.3c.1-1.8.5-4.3 1.7-4.3zM.9 12.7c.2.2.3.3.6.4.3 1.4 1 2.8 2 3.9s2.4 1.7 3.9 1.7 2.9-.6 3.9-1.7 1.7-2.4 2-3.9c.2-.1.4-.3.6-.4.3-.4.6-.8.7-1.3.2-.5.2-1 .2-1.5v-.3c0-.4-.2-.8-.4-1.1-.2-.2-.3-.3-.6-.4 0-.2.1-.4.1-.6.4-2.1-.1-5.9-4.4-7.2C7.2-.5 4.7.2 3.1 2c0 0-3 .9-2.2 6.2-.2 0-.3.1-.4.3-.3.3-.5.7-.5 1v.3c0 .7.2 1.3.4 2 .2.3.3.6.5.9z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-126-581h375v1740h-375z"/></defs><clipPath id="d"><use xlink:href="#c" overflow="visible"/></clipPath><path clip-path="url(#d)" fill="#FFF" d="M-5-5h24.8v28.7H-5z"/></g></svg> <span></span</a>').appendTo("#update_cart_total .container"),$($("<div/>").attr("id","vto-on-model").addClass("vto-on-model__container vto-hide").append('<div id="vto_modal_app_root" >vto_model_root</div>').append('<p class="vto-on-model__disclaimer" >Model Head Size: Average</p').append($("<div/>").addClass("vto-on-model__toggle vto-on-model__toggle--disable").append('<a class="vto-on-model__button-female outlineButton outlineButton--active" data-model-name="women" >Female</a>').append('<a class="vto-on-model__button-male outlineButton" data-model-name="men" >Male</a>')).append('<p class="vto-on-model__copy" >Want to see these on yourself? <br> <a class="sgh-vto-overlay-open" >Try Them On</a>!</p')).insertAfter("#update_cart_total > .container"),$($("<div/>").attr("id","sgh_vto_overlay").append($("<div/>").attr("id","sgh-vto-overlay_video").append('<span id="user-id">c4a6953b-986c-4549-a927-a7c5d4ea1054</span>').append($("<div/>").attr("id","sgh-vto-video-container").append('<div id="vto_app_root" class="vto-hide">vto_app_root</div>')).append($("<div/>").attr("id","sgh-vto-vtomodel-container").prepend($("<div/>").attr("id","sgh-vto-overlay-video-buttons").append('<a class="button sgh-vto-overlay-close  white button_back-arrow"><svg class="back-bar-arrow" width="8px" height="14px" viewBox="0 0 8 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="Ray-Ban-Mobile-VTO"><g id="6.0-Reveal---Without-Sunglasses" transform="translate(-70.000000, -553.000000)"><g id="Icons/Ray-Ban-Arrow-(Black)" transform="translate(70.000000, 553.000000)"><path d="M5.18269231,14 L-3.51718654e-13,14 L-3.51718654e-13,13.9230769 L4.71153846,7 L-3.5199621e-13,0.0769230769 L-3.51718654e-13,0 L5.18269231,0 L2.82692308,0 L2.82692308,0.0769230769 L7.53846154,7 L2.82692308,13.9230769 L2.82692308,14 L5.18269231,14 Z" id="Combined-Shape" transform="translate(3.769231, 7.000000) rotate(-180.000000) translate(-3.769231, -7.000000) "></path></g></g></g></svg> Back to Product Page</a>').append('<a id="vto-open-edit" class="vto-hide" >Options</a> '))).append($("<div/>").attr("id","sgh-vto-video-edit-container").addClass("vto-hide vto-video-edit-modal-initial").append($("<div/>").attr("id","sgh-vto-video-edit").addClass("sgh-vto-video-edit-modal").append('<i class="modal-close vto-option-cancel">&#10006;</i>').append($("<div/>").addClass("vto-edit-page vto-edit-initial").append("<p>VIRTUAL MODEL OPTIONS</p>").append('<a class="vto-retake-button outlineButton" >RETAKE MY VIDEO</a>').append('<a class="vto-delete-button outlineButton">REMOVE MY VIRTUAL MODEL</a>')).append($("<div/>").addClass("vto-edit-page vto-edit-retake").append("<p>RETAKING YOUR VIDEO WILL REMOVE YOUR CURRENT ONE </p>").append('<a class="vto-option-cancel button black" >CANCEL</a>').append('<a class="vto-retake-confirm outlineButton">RETAKE</a>')).append($("<div/>").addClass("vto-edit-page vto-edit-delete").append("<p>ARE YOU SURE YOU WANT TO REMOVE YOUR VIRTUAL MODEL? </p>").append('<a class="vto-option-cancel button black" >CANCEL</a>').append('<a class="vto-delete-confirm outlineButton">REMOVE</a>'))).append('<div class="sgh-vto-video-edit-background vto-option-cancel"></div>')).append('<div class="vto-hide" id="render-success"><span id="video-id">video-id</span> <span id="render-success-time">&quot;video-id</span> <span id="render-success-time"><!--render--></span> <span id="video-id">video-id</span></div>'))).appendTo("#pageContainer"),$(".sgh-vto-overlay-close").on("click",function(){e.closeVTOModelWindow(),e.analyticsTrack("closed vto")}),$(".vto-on-model__toggle a").on("click",function(){var o=$(this).data("model-name");$(".vto-on-model__toggle").addClass("vto-on-model__toggle--disable"),$(".vto-on-model__toggle a").removeClass("outlineButton--active"),$(this).addClass("outlineButton--active"),$.cookie("vtoModelId",o,{expires:14,path:"/",domain:"sunglasshut.com"}),e.settings.upcGender=o,e.settings.clickedModel=!0,e.clearModelCanvas(),e.buildOnModel(),e.analyticsTrack("changed model: "+o)})},clearModelCanvas:function(){$("#vto-on-model__root").height($(window).width())},getPDPGender:function(){var e=this,o="/webapp/wcs/stores/servlet/GetCatalogEntryDetailsByID?catalogId=10101&langId=-1&storeId=10152&productId=",t=e.settings.glassesUpc;window.jQuery.ajax(o+t,{success:function(o){var t=o.trim().replace("/*","");t=t.replace("*/","");for(var a=JSON.parse(t),i="",n=[],s=a.catalogEntryAttributes.attributes,d=0;d<s.length;d++){var l=s[d].name;if("Gender"===l){i=a.catalogEntryAttributes.attributes[d].values;for(var r=0;r<i.length;r++)n[r]=i[r].value}}n=n.toString(),n=n.toLowerCase(),e.settings.upcGender=n,e.buildOnModel(o)},complete:function(){$(".ajax-loader-wrap, #ajax-container").show()},error:function(){e.buildOnModel(data),console.log("error")}})},buildOnModel:function(e){function o(){$("#vto-on-model").fadeIn(300),setTimeout(function(){$(".vto-on-model__toggle").removeClass("vto-on-model__toggle--disable")},800)}function t(){setTimeout(function(){$("#vto-on-model #vto_modal_app_root").show()},300),VtoApp.renderGlasses("vto_modal_app_root",s,i,{width:$(window).width(),height:$(window).width()},o(),a.genericErrorHandler,{showRotateBar:!0})}var a=this,i=a.settings.glassesUpc,n=a.settings.currentUserId,s=(a.settings.noVTOModel,utag.data.page_type,a.settings.modelVideoId),d={render:{onPageLoad:function(){},onFaceSwipe:function(){$("#sgh_vto_overlay.active").length?a.analyticsTrack("vto pdp: swipe face: on user"):a.analyticsTrack("vto pdp: swipe face: on model")}}};if("men"!==a.settings.upcGender||$.cookie("vtoModelId")||($(".vto-on-model__toggle a").removeClass("outlineButton--active"),$(".vto-on-model__button-male").addClass("outlineButton--active"),s="zak"),$.cookie("vtoId")&&"deleted"!==$.cookie("vtoId")&&a.settings.clickedModel===!1){var l=JSON.parse($.cookie("vtoId"));"women"===l.cat?(s="alessandra",$(".vto-on-model__toggle a").removeClass("outlineButton--active"),$(".vto-on-model__button-female").addClass("outlineButton--active")):"men"===l.cat&&(s="zak",$(".vto-on-model__toggle a").removeClass("outlineButton--active"),$(".vto-on-model__button-male").addClass("outlineButton--active"))}else $.cookie("vtoModelId")&&("women"===$.cookie("vtoModelId")?(s="alessandra",$(".vto-on-model__toggle a").removeClass("outlineButton--active"),$(".vto-on-model__button-female").addClass("outlineButton--active")):"men"===$.cookie("vtoModelId")&&(s="zak",$(".vto-on-model__toggle a").removeClass("outlineButton--active"),$(".vto-on-model__button-male").addClass("outlineButton--active")));if($.cookie("vtoId")&&"deleted"!==$.cookie("vtoId")){var l=JSON.parse($.cookie("vtoId"));a.settings.currentUserId=l.userId,a.settings.currentVideo=l.videoId,a.settings.currentVideo&&(a.settings.noVTOModel=!1)}VtoApp.init(n,i,"sunglasshut","en-US","master",d,function(e){t()},a.genericErrorHandler,{modelName:s})},analyticsTrack:function(e){var o=this,t=o.settings.currentVideo,a=o.settings.noVTOModel,i=o.settings.userGender,n=o.settings.userSize,s="new";t&&a!==!0&&(s="returning"),""!==i&&"undefined"!==i?i+=": ":i="",""!==n&&"undefined"!==n?n+=": ":n="";var d=[{upc:o.settings.glassesUpc}],l={link_name:"sgh: vto: onmodel: "+s+": "+i+n+e,site_events:{see_their_shades:!0},prd_upc:[o.settings.glassesUpc],products:d,authenticated_status:utag_data.authenticated_status||"",language:utag_data.language||"",cntry:utag_data.country||""};_trackAnalytics(l)},vtoClose:function(){$("#vto_modal_app_root").hide().prependTo("#vto-on-model"),sghVTO.buildOnModel(),$("#pageContainer").removeClass("vto-disable-scrolling").bind("touchmove"),$("#sgh_vto_overlay").removeClass("active").hide(),1==$("#sgh-vto-video-edit-container").is(":visible")&&$("#sgh-vto-video-edit-container").hide().addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake"),$("html").removeClass("hide-body"),$("body").removeClass("fullscreen-open"),$("html").css("top","")},closeVTOModelWindow:function(){var e=this;$("#sgh-vto-vtomodel-container").delay(100).animate({right:"-100%"},300,function(){$("#sgh_vto_overlay .info-container").hide(),$(this).addClass("vto-hide"),e.vtoClose()})},genericErrorHandler:function(e){$("#vto_app_root").hide(),$("#vto-on-model").hide(),$("#sgh-vto-overlay_video").hide(),$("#vto_start_button").addClass("hide"),console.log("error"+e)},vtoApplication:function(e){function o(){$("#vto_modal_app_root .info-container").length<1&&$("#vto_modal_app_root").after('<div class="info-container vto-hide"></div>');var e=$("#update_cart_total .info-container").find(".brand").text(),o=$("#update_cart_total .info-container").find(".price").text(),t=$("#update_cart_total .info-container").find(".style").first().text(),a=$(".styleInfo ").find("li:eq(5)").html(),i=$(".swatchesTitle").find("h3").html(),n=$("#update_cart_total .info-container > .catalog-polarized").length,s=n?'<p class="catalog-polarized">Polarized</p>':"";$("#sgh_vto_overlay .info-container").html("").html('<p class="brand">'+e+"</p>"+s+'<p class="price">'+o+'</p><p class="style">'+t+'</p><p class="swatch">'+i+'</p><p class="fit">'+a+"</p>")}function t(){$.cookie("vtoId")&&$.cookie("vtoId","deleted",{expires:1,path:"/",domain:"sunglasshut.com"}),l.analyticsTrack("option modal: delete modal: confirmed");var e="http://"+window.location.host+window.location.pathname;location.href=e,l.closeVTOModelWindow(),$("#sgh-vto-video-container").addClass("active"),$("#sgh-vto-vtomodel-container").removeClass("active"),$("a.sgh-vto-overlay-open").find("span").text("TRY THEM ON"),$("#sgh-vto-overlay_video").hide(),$("#sgh_vto_overlay .info-container").hide(),$("#sgh-vto-overlay_container").show(),$("#vto-open-edit").hide(),$("#sgh-vto-video-edit-container").hide().addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake"),u=!1,p="",l.settings.currentVideo="",g=!0}function a(){if(!$.cookie("vtoId")||"deleted"===$.cookie("vtoId")||u===!0){var e=jQuery.parseJSON('{ "userId": "'+v+'", "videoId": "'+p+'", "cat": "'+l.settings.userGender+'", "style": "'+l.settings.userSize+'" }');$.cookie("vtoId",JSON.stringify(e),{expires:300,path:"/",domain:"sunglasshut.com"}),l.settings.currentVideo=p,l.settings.currentUserId=v;$.cookie("vtoId")}$("#sgh-vto-overlay-video-buttons.vto-hide").removeClass("vto-hide"),$("#sgh-vto-video-container").removeClass("active"),$("#vto-open-edit").delay(300).fadeIn(300),1!=m&&(o(),$("#vto-open-edit").on("click",function(){$("#sgh-vto-video-edit-container").fadeIn(300),l.analyticsTrack("option modal:")}),$(".vto-option-cancel").on("click",function(){$("#sgh-vto-video-edit-container").fadeOut(300),$("#sgh-vto-video-edit-container").addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake"),l.analyticsTrack("option modal: cancel")}),$(".vto-retake-button").on("click",function(){$("#sgh-vto-video-edit-container").addClass("vto-video-edit-modal-retake").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-initial"),l.analyticsTrack("option modal: retake modal:")}),$(".vto-retake-cancel").on("click",function(){$("#sgh-vto-video-edit-container").addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake"),l.analyticsTrack("option modal: retake modal: cancel")}),$(".vto-retake-confirm").on("click",function(){$("#sgh-vto-vtomodel-container").delay(100).animate({right:"-100%"},300,function(){$("#sgh-vto-video-container").addClass("active"),$("#sgh-vto-vtomodel-container").removeClass("active"),s()}),l.analyticsTrack("option modal: retake modal: confirmed"),u=!0,$("#vto-open-edit").hide(),1==$("#sgh-vto-video-edit-container").is(":visible")&&$("#sgh-vto-video-edit-container").hide().addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake")}),$(".vto-delete-cancel").on("click",function(){$("#sgh-vto-video-edit-container").addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake"),l.analyticsTrack("option modal: delete modal: cancel")}),$(".vto-delete-confirm").on("click",function(){t()}),$(".vto-delete-button").on("click",function(){$("#sgh-vto-video-edit-container").removeClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-retake").addClass("vto-video-edit-modal-delete"),l.analyticsTrack("option modal: delete modal:")}),$("a.sgh-vto-overlay-open").find("span").text("VIEW YOUR VIRTUAL MODEL"),m=!0),$("#sgh_vto_overlay .info-container").delay(200).fadeIn(300),$("sgh-vto-overlay_container").hide(),l.analyticsTrack("vto pdp:"),u=!1,g=!1}function i(e){$("#sgh-vto-vtomodel-container").addClass("active").removeClass("vto-hide").delay(100).animate({right:"0"},300,function(){$("#video-id").text(p),setTimeout(function(){$("#sgh-vto-vtomodel-container #vto_modal_app_root").show()},600),VtoApp.renderGlasses("vto_modal_app_root",p,l.settings.glassesUpc,{width:$(window).width(),height:$(window).width()},a,l.genericErrorHandler,{showRotateBar:!0}),h=e,u=!1}),$("#sgh-vto-video-container").removeClass("active")}function n(e,o){p=e,l.settings.userGender=o.gender,l.settings.userSize=o.fit,$("#sgh-vto-vtomodel-container").addClass("active").removeClass("vto-hide").delay(50).animate({right:"0"},300,function(){setTimeout(function(){$("#sgh-vto-vtomodel-container #vto_modal_app_root").show()},600),VtoApp.renderGlasses("vto_modal_app_root",p,l.settings.glassesUpc,{width:$(window).width(),height:$(window).width()},a,l.genericErrorHandler,{showRotateBar:!0})})}function s(){$(".vto-try-them-on").hide(),VtoApp.startCapture("vto_app_root",v,l.settings.glassesUpc,{width:$(window).width(),height:$(window).width()},{onCloseVto:l.vtoClose,showWelcomePage:!1,showScalingQuestions:!0,showReviewWithGlasses:!1,showSaveToAccount:!1},n,n,l.genericErrorHandler),$(c).removeClass("vto-hide").show(),$("#sgh-vto-overlay_video").show(),$("#sgh-vto-overlay_container").hide()}function d(e){var o=$("a.sgh-vto-overlay-open");VtoApp.init(v,l.settings.glassesUpc,"sunglasshut","en-US","master",_,function(e){$("#user-id").text("#user-id "+e),v=e,p?(o.find("span").text("VIEW YOUR VIRTUAL MODEL"),o.removeClass("vto-hide").addClass("vto-show")):(o.find("span").text("TRY THEM ON"),o.removeClass("vto-hide").addClass("vto-show")),o.on("click",function(){$("#pageContainer").addClass("vto-disable-scrolling").unbind("touchmove"),l.clearModelCanvas();var e=$(this).parent();$("#vto_modal_app_root").hide().insertAfter("#sgh-vto-overlay-video-buttons"),e.is(".vto-on-model__copy")?l.analyticsTrack("clicked try on: model"):l.analyticsTrack("clicked try on: cta"),p?($(".vto-try-them-on").hide(),$("#vto_toggle_button").show(),$("#my_vto_div").show(),$("#sgh-vto-overlay_video").show(),$("#sgh-vto-overlay_container").hide(),l.settings.currentVideo=p,$("#sgh_vto_overlay").addClass("active").show(),i(r),g=!0):($("#sgh_vto_overlay").addClass("active").show(),s()),$("html").addClass("hide-body")})},l.genericErrorHandler),$(".vto-start-button").on("click",function(){s(),1==$("#sgh-vto-video-edit-container").is(":visible")&&$("#sgh-vto-video-edit-container").hide().addClass("vto-video-edit-modal-initial").removeClass("vto-video-edit-modal-delete").removeClass("vto-video-edit-modal-retake")})}var l=this,r=l.settings.glassesUpc,c="#vto_app_root",v=l.settings.currentUserId,p=l.settings.currentVideo,u=!1,g=l.settings.noVTOModel,h="",m=(utag.data.page_type,!1),_={instructions:{onPageLoad:function(){l.analyticsTrack("step 1: instructions")}},uploadingVideo:{onPageLoad:function(){l.analyticsTrack("step 2: uploaded video")}},genderSelect:{onPageLoad:function(){l.analyticsTrack("step 3: select gender")}},sizeSelect:{onPageLoad:function(){l.analyticsTrack("step 3: select size")}},analyzingVideo:{onPageLoad:function(){l.analyticsTrack("step 3: analyzing video")}},reviewWithoutGlasses:{onPageLoad:function(){l.analyticsTrack("step 4: review without glasses")},onFaceSwipe:function(){}},mappingGlasses:{onPageLoad:function(){l.analyticsTrack("step 4: mapping glasses")}},render:{onPageLoad:function(){l.analyticsTrack("step 5: review with glasses")},onFaceSwipe:function(){l.analyticsTrack("vto pdp: swipe face")}},reviewWithGlasses:{onPageLoad:function(){l.analyticsTrack("step 5: review with glasses")},onContinueNoSave:function(){l.analyticsTrack("step 6: onContinueNoSave")},onFaceSwipe:function(){l.analyticsTrack("step 5: review with glasses : swipe face")}},saveToAccount:{onPageLoad:function(){l.analyticsTrack("step 6: save to account")},onSave:function(){console.log("step 6: save to account")},onContinueNoSave:function(){console.log("step 6: save to account")}},uploadFailed:{onPageLoad:function(){l.analyticsTrack("error: uploading failed")}},videoTooLong:{onPageLoad:function(){l.analyticsTrack("error: video too long")}},processingError:{onPageLoad:function(){l.analyticsTrack("error: video processing")}}};d(e)},vtoAPI:function(){var e=this,o="https://d1phjbsp802ne8.cloudfront.net/vto-mobile-application.js";window.jQuery.ajax(o,{type:"get",dataType:"script",cache:!0,async:!0,crossDomain:!0,success:function(o){function t(t){if($.cookie("vtoId")&&"deleted"!==$.cookie("vtoId")){var a=JSON.parse($.cookie("vtoId"));e.settings.currentUserId=a.userId,e.settings.currentVideo=a.videoId,e.settings.currentVideo&&(e.settings.noVTOModel=!1)}t===!0?(e.getPDPGender(),e.vtoElements(),e.vtoApplication(o),e.analyticsTrack("supported upc:")):e.analyticsTrack("not supported upc:")}VtoApp.isUpcSupported(e.settings.glassesUpc,t,e.genericErrorHandler)},complete:function(){$(".ajax-loader-wrap, #ajax-container").show()},error:function(){console.log("error")}})},init:function(){return this.vtoAPI(),this}};window.sghVTO=o}(),$(function(){sghVTO.init()});